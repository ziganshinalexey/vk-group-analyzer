{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./utils.js","webpack:///./carousel.js","webpack:///./metrics.js","webpack:///./modal.js","webpack:///./public.js","webpack:///./constants.js","webpack:///./info-block.js","webpack:///./layout.js","webpack:///./handlers.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","findClosest","$el","selector","$$targets","document","querySelectorAll","$tempEl","$found","forEach","$target","parentNode","findElLastParentNode","nextNode","getDataAttrName","selectWithAttr","attrName","attrValue","getUTCTime","time","Date","getTime","offset","getTimezoneOffset","normalizeDate","date","replace","getOrientationAffix","orientation","_utils","checkCarousel","drawCarousel","_ref","props","section","$section","$","$carousel","createElement","$track","$inner","$controls","$forward","$backward","dynamicOrientationAffix","className","carouselClass","carouselTrackClass","carouselInnerClass","carouselControlsClass","carouselControlBackwardClass","carouselControlForwardClass","appendChild","carousel","blocked","carouselDefaultBlocked","infoBlocks","slide","carouselDefaultSlide","changeSlide","_ref2","diff","amount","_section$carousel","axis","infoBlocksAmount","keys","length","availableSlideAmount","Math","max","computedSlide","newSlide","style","transform","_ref3","_section$carousel2","isBlocked","setAttribute","iBSectionAttrBlocked","iBSectionAttrBlockedTrue","iBSectionAttrBlockedFalse","metricsClickInfoBlock","infoBlock","channelId","layoutId","videoId","blockName","infoBlockId","infoBlockScheduleId","xhr","XMLHttpRequest","open","host","setRequestHeader","withCredentials","send","JSON","stringify","clickDate","metricsClickVideo","structure","layout","video","userId","userAge","userLocation","platform","id","drawModal","modal","$modal","querySelector","iBModalSelector","$close","$content","iBModalCloseClass","iBModalContentClass","isOpened","drawModalContents","title","fullDescription","shortDescription","$title","iBModalTitleClass","innerHTML","$shortDescription","iBModalShortDescriptionClass","$fullDescription","iBModalFullDescriptionClass","clearModalContents","_carousel","_constants","_infoBlock","_layout","_modal","_metrics","window","initTouchTv","options","callback","DEFAULT_OPTIONS","container","infoBlockList","infoBlockScheduleList","sections","onreadystatechange","readyState","status","data","parse","responseText","iBRefresh","clearInterval","drawLayout","handleMainRequest","$layout","$$sections","iBSectionSelector","getAttribute","iBSectionAttrAmount","iBSectionAttrId","iBSectionAttrOrientation","handleInfoBlock","setInterval","iBRefreshInterval","destroyTouchTv","$container","containerSelector","setTimeTouchTv","timeTouchTv","carouselHorizontalClass","carouselSlideClass","carouselVerticalClass","emptySpaceSelector","iBBackdropClass","iBBackdropClassFull","iBBgColor","iBClass","iBModalAttrHidden","iBModalAttrHiddenFalse","iBModalAttrHiddenTrue","iBSelector","iBShortDescriptionClass","iBTitleClass","iBTitleClassAlign","iBTitleInnerClass","iBWrapperClass","layoutSelector","videoSelector","restInfoBlockScheduleData","_objectWithoutProperties","from","to","sectionKey","find","structureInfoBlockKey","momentNow","momentFrom","momentTo","$infoBlock","$infoBlockWrapper","dynamicClass","round","infoBlockData","infoBlockDataItem","extInfoBlockData","newInfoBlock","drawInfoBlockContents","removeInfoBlock","currInfoBlockScheduleId","$infoBlockNode","removeChild","reduce","acc","infoBlockScheduleKey","_extends","_defineProperty","image","withTitle","withDescription","backgroundImage","backgroundColor","$backdrop","dynamicBackdropClass","$titleInner","dynamicTitleClass","textContent","_handlers","src","addEventListener","e","handleClick","target","_structure$modal","isTargetInModal","undefined","type","infoBlockKey"],"mappings":"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","file":"js/main.min.js?d4dcc5f9","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","export function findClosest($el, selector) {\n    const $$targets = document.querySelectorAll(selector);\n    let $tempEl = $el;\n\n    while ($tempEl) {\n        let $found = null;\n\n        $$targets.forEach(function($target) {\n            if ($tempEl === $target) {\n                $found = $target;\n            }\n        });\n\n        if ($found) {\n            return $tempEl;\n        } else {\n            $tempEl = $tempEl.parentNode;\n        }\n    }\n\n    return null;\n}\n\nexport function findElLastParentNode($el, $target) {\n    let $tempEl = $el;\n\n    while ($tempEl && $tempEl.parentNode) {\n        const nextNode = $tempEl.parentNode;\n\n        if (nextNode === $target) {\n            return $tempEl;\n        } else {\n            $tempEl = nextNode;\n        }\n    }\n\n    return null;\n}\n\nexport function getDataAttrName(name) {\n    return name ? 'data-' + name : null;\n}\n\nexport function selectWithAttr(attrName, attrValue) {\n    return attrName ? '[' + attrName + '=\"' + attrValue + '\"]' : '';\n}\n\nexport function getUTCTime() {\n    const time = new Date().getTime();\n    const offset = new Date().getTimezoneOffset() * 60000;\n\n    return time - offset;\n}\n\nexport function normalizeDate(date) {\n    return date.replace(/-/g, '/');\n}\n\nexport function getOrientationAffix(orientation) {\n    switch (orientation) {\n        case 'horizontal':\n            return 'h';\n        case 'vertical':\n            return 'v';\n        default:\n            return '';\n    }\n}\n","import {getOrientationAffix} from './utils';\n\nexport const drawCarousel = ({props, section}) => {\n    if (section) {\n        const {$: $section, orientation} = section;\n        const $carousel = document.createElement('div');\n        const $track = document.createElement('div');\n        const $inner = document.createElement('div');\n        const $controls = document.createElement('div');\n        const $forward = document.createElement('div');\n        const $backward = document.createElement('div');\n        const dynamicOrientationAffix = getOrientationAffix(orientation);\n\n        $carousel.className = `${props.carouselClass} ${props.carouselClass}-${dynamicOrientationAffix}`;\n        $track.className = props.carouselTrackClass;\n        $inner.className = props.carouselInnerClass;\n        $controls.className = props.carouselControlsClass;\n        $backward.className = props.carouselControlBackwardClass;\n        $forward.className = props.carouselControlForwardClass;\n        $controls.appendChild($backward);\n        $controls.appendChild($forward);\n        $carousel.appendChild($controls);\n        $track.appendChild($inner);\n        $carousel.appendChild($track);\n        $section.appendChild($carousel);\n        section.carousel = {\n            $: $carousel,\n            $backward,\n            $controls,\n            $forward,\n            $inner,\n            blocked: props.carouselDefaultBlocked,\n            infoBlocks: {},\n            slide: props.carouselDefaultSlide,\n        };\n        checkCarousel({props, section});\n    }\n};\n\nexport const changeSlide = ({diff, section}) => {\n    const {\n        amount,\n        carousel,\n        carousel: {$inner, blocked, infoBlocks, slide},\n        orientation,\n    } = section;\n\n    if (!blocked) {\n        let axis = null;\n\n        switch (orientation) {\n            case 'horizontal':\n                axis = 'X';\n\n                break;\n            case 'vertical':\n                axis = 'Y';\n\n                break;\n            default:\n                break;\n        }\n\n        const infoBlocksAmount = Object.keys(infoBlocks).length;\n        const availableSlideAmount = Math.max(infoBlocksAmount - amount + 1, 1);\n        const computedSlide = slide + diff;\n        let newSlide = slide;\n\n        switch (true) {\n            case 0 > diff:\n                newSlide = 1 === slide ? availableSlideAmount : computedSlide;\n\n                break;\n            case 0 < diff:\n                newSlide = availableSlideAmount === slide ? 1 : computedSlide;\n\n                break;\n            default:\n                break;\n        }\n\n        if (newSlide !== slide) {\n            carousel.slide = newSlide;\n\n            const offset = -(newSlide - 1) * (1 / amount) * 100;\n\n            $inner.style.transform = `translate${axis}(${offset}%)`;\n        }\n    }\n};\n\nexport const checkCarousel = ({props, section}) => {\n    const {\n        amount,\n        carousel,\n        carousel: {$: $carousel, $inner, blocked, infoBlocks},\n    } = section;\n\n    const infoBlocksAmount = Object.keys(infoBlocks).length;\n    const isBlocked = infoBlocksAmount <= amount;\n\n    if (blocked !== isBlocked) {\n        carousel.blocked = isBlocked;\n\n        if (isBlocked) {\n            carousel.slide = props.carouselDefaultSlide;\n            $inner.style.transform = null;\n        }\n\n        $carousel.setAttribute(props.iBSectionAttrBlocked, isBlocked ? props.iBSectionAttrBlockedTrue : props.iBSectionAttrBlockedFalse);\n    }\n};\n","import {getUTCTime} from './utils';\n\nexport const metricsClickInfoBlock = ({infoBlock, props}) => {\n    if (infoBlock) {\n        const {channelId, layoutId, videoId} = props;\n        const {blockName, infoBlockId, infoBlockScheduleId} = infoBlock;\n        const xhr = new XMLHttpRequest();\n\n        xhr.open('POST', `${props.host}/api/v1/info-block-click`, true);\n        xhr.setRequestHeader('x-http-method-override', 'CREATE');\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.withCredentials = true;\n        xhr.send(\n            JSON.stringify({\n                blockName,\n                channelId,\n                clickDate: getUTCTime(),\n                infoBlockId,\n                infoBlockScheduleId,\n                layoutId,\n                videoId,\n            })\n        );\n    }\n};\n\nexport const metricsClickVideo = ({props, structure}) => {\n    const {layout, video} = structure;\n\n    if (layout && video) {\n        const {channelId, userId, userAge, userLocation, platform} = props;\n        const {id: layoutId} = layout;\n        const {id: videoId} = video;\n        const xhr = new XMLHttpRequest();\n\n        xhr.open('POST', `${props.host}/api/v1/video-click`, true);\n        xhr.setRequestHeader('x-http-method-override', 'CREATE');\n        xhr.setRequestHeader('Content-Type', 'application/json');\n        xhr.withCredentials = true;\n        xhr.send(\n            JSON.stringify({\n                channelId,\n                clickDate: getUTCTime(),\n                layoutId,\n                platform,\n                userAge,\n                userId,\n                userLocation,\n                videoId,\n            })\n        );\n    }\n};\n","export const drawModal = ({props, structure}) => {\n    const {modal} = structure;\n\n    if (modal) {\n        const $modal = document.querySelector(props.iBModalSelector);\n\n        if ($modal) {\n            const $close = document.createElement('div');\n            const $content = document.createElement('div');\n\n            $modal.setAttribute('hidden', 'true');\n            $close.className = props.iBModalCloseClass;\n            $content.className = props.iBModalContentClass;\n            $modal.appendChild($close);\n            $modal.appendChild($content);\n            structure.modal = {\n                $: $modal,\n                $close,\n                $content,\n                isOpened: false,\n            };\n        }\n    }\n};\n\nexport const drawModalContents = ({infoBlock, props, structure}) => {\n    if (infoBlock) {\n        const {\n            modal: {$content},\n        } = structure;\n\n        if ($content) {\n            const {title, fullDescription, shortDescription} = infoBlock;\n\n            if (title) {\n                const $title = document.createElement('div');\n\n                $title.className = props.iBModalTitleClass;\n                $title.innerHTML = title;\n                $content.appendChild($title);\n            }\n\n            if (shortDescription) {\n                const $shortDescription = document.createElement('div');\n\n                $shortDescription.className = props.iBModalShortDescriptionClass;\n                $shortDescription.innerHTML = shortDescription;\n                $content.appendChild($shortDescription);\n            }\n\n            if (fullDescription) {\n                const $fullDescription = document.createElement('div');\n\n                $fullDescription.className = props.iBModalFullDescriptionClass;\n                $fullDescription.innerHTML = fullDescription;\n                $content.appendChild($fullDescription);\n            }\n        }\n    }\n};\n\nexport const clearModalContents = ({structure}) => {\n    const {\n        modal: {$content},\n    } = structure;\n\n    if ($content) {\n        $content.innerHTML = null;\n    }\n};\n","import {drawCarousel} from './carousel';\nimport {DEFAULT_OPTIONS} from './constants';\nimport {handleInfoBlock} from './info-block';\nimport {drawLayout} from './layout';\nimport {drawModal} from './modal';\nimport {getDataAttrName} from './utils';\nimport {metricsClickVideo} from './metrics';\n\nconst initTouchTv = (options, callback) => {\n    const props = {\n        ...DEFAULT_OPTIONS,\n        ...options,\n    };\n    const structure = {\n        container: {},\n        infoBlockList: [],\n        infoBlockScheduleList: [],\n        layout: {},\n        modal: {},\n        sections: {},\n        video: {},\n    };\n\n    const handleMainRequest = (data) => {\n        const {layout} = structure;\n\n        if (layout) {\n            const {$: $layout} = layout;\n            const {infoBlockList, infoBlockScheduleList, video} = data;\n\n            structure.infoBlockList = infoBlockList;\n            structure.infoBlockScheduleList = infoBlockScheduleList;\n\n            if (!Object.keys(structure.video).length) {\n                structure.video = video;\n                metricsClickVideo({props, structure});\n            }\n\n            if (!Object.keys(structure.modal).length) {\n                drawModal({props, structure});\n            }\n\n            if (!Object.keys(structure.sections).length) {\n                const $$sections = $layout.querySelectorAll(props.iBSectionSelector);\n\n                if ($$sections) {\n                    $$sections.forEach(($section) => {\n                        const amount = $section.getAttribute(getDataAttrName(props.iBSectionAttrAmount));\n                        const id = $section.getAttribute(getDataAttrName(props.iBSectionAttrId));\n                        const orientation = $section.getAttribute(getDataAttrName(props.iBSectionAttrOrientation));\n                        const section = {\n                            $: $section,\n                            amount,\n                            id,\n                            orientation,\n                        };\n\n                        structure.sections[id] = section;\n                        drawCarousel({props, section});\n                    });\n                }\n            }\n\n            infoBlockScheduleList.forEach((infoBlock) => {\n                handleInfoBlock({infoBlock, props, structure});\n            });\n\n            if (!window.iBRefresh) {\n                window.iBRefresh = window.setInterval(() => {\n                    handleMainRequest(data);\n                }, props.iBRefreshInterval);\n            }\n        }\n    };\n\n    const xhr = new XMLHttpRequest();\n\n    xhr.open('POST', `${props.host}/api/v1/layout/current`, true);\n    xhr.setRequestHeader('x-http-method-override', 'GET');\n    xhr.setRequestHeader('Content-Type', 'application/json');\n    xhr.onreadystatechange = () => {\n        if (4 === xhr.readyState) {\n            if (200 === xhr.status) {\n                const {data} = JSON.parse(xhr.responseText);\n\n                if (window.iBRefresh) {\n                    window.clearInterval(window.iBRefresh);\n                }\n\n                window.iBRefresh = null;\n\n                if (data) {\n                    drawLayout({\n                        callback: () => {\n                            handleMainRequest(data);\n\n                            if (callback) {\n                                callback();\n                            }\n                        },\n                        data,\n                        props,\n                        structure,\n                    });\n                }\n            }\n        }\n    };\n    xhr.withCredentials = true;\n    xhr.send(\n        JSON.stringify({\n            channelId: props.channelId,\n            time: props.time,\n        })\n    );\n};\n\nconst destroyTouchTv = (options, callback) => {\n    const props = {\n        ...DEFAULT_OPTIONS,\n        ...options,\n    };\n\n    window.iBRefresh = null;\n\n    const $container = document.querySelector(props.containerSelector);\n\n    if ($container) {\n        $container.innerHTML = '';\n\n        if (callback) {\n            callback();\n        }\n    }\n};\n\nconst setTimeTouchTv = (time, callback) => {\n    window.timeTouchTv = time;\n\n    if (callback) {\n        callback();\n    }\n};\n\nwindow.initTouchTv = initTouchTv;\nwindow.destroyTouchTv = destroyTouchTv;\nwindow.setTimeTouchTv = setTimeTouchTv;\n","import {getUTCTime} from './utils';\n\nexport const DEFAULT_OPTIONS = {\n    carouselClass: 'carousel',\n    carouselControlBackwardClass: 'carousel-control carousel-control-backward',\n    carouselControlForwardClass: 'carousel-control carousel-control-forward',\n    carouselControlsClass: 'carousel-controls',\n    carouselDefaultBlocked: false,\n    carouselDefaultSlide: 1,\n    carouselHorizontalClass: 'carousel-h',\n    carouselInnerClass: 'carousel-inner g-h-xs-10 g-h-lg-20 g-v-xs-10 g-v-lg-20',\n    carouselSlideClass: 'carousel-slide',\n    carouselTrackClass: 'carousel-track',\n    carouselVerticalClass: 'carousel-v',\n    containerSelector: 'body',\n    emptySpaceSelector: '.j-empty-space',\n    host: 'http://demo.touch-tv-front.stands.userstory.ru',\n    iBBackdropClass: 'info-block-backdrop',\n    iBBackdropClassFull: 'info-block-backdrop-full',\n    iBBgColor: '#315efb',\n    iBClass: 'info-block j-info-block',\n    iBModalAttrHidden: 'hidden',\n    iBModalAttrHiddenFalse: 'false',\n    iBModalAttrHiddenTrue: 'true',\n    iBModalCloseClass: 'info-block-modal-close',\n    iBModalContentClass: 'info-block-modal-content',\n    iBModalFullDescriptionClass: 'info-block-modal-full-description',\n    iBModalSelector: '.j-info-block-modal',\n    iBModalShortDescriptionClass: 'info-block-modal-short-description',\n    iBModalTitleClass: 'info-block-modal-title',\n    iBRefreshInterval: 1000,\n    iBSectionAttrAmount: 'amount',\n    iBSectionAttrBlocked: 'blocked',\n    iBSectionAttrBlockedFalse: 'false',\n    iBSectionAttrBlockedTrue: 'true',\n    iBSectionAttrId: 'id',\n    iBSectionAttrOrientation: 'orientation',\n    iBSectionSelector: '.j-info-block-section',\n    iBSelector: '.j-info-block',\n    iBShortDescriptionClass: 'info-block-short-description',\n    iBTitleClass: 'info-block-title',\n    iBTitleClassAlign: 'info-block-title-align',\n    iBTitleInnerClass: 'info-block-title-inner',\n    iBWrapperClass: 'info-block-wrapper',\n    layoutSelector: '.j-layout',\n    time: getUTCTime(),\n    videoSelector: '.j-video',\n};\n","import {checkCarousel} from './carousel';\nimport {metricsClickInfoBlock} from './metrics';\nimport {findElLastParentNode, getOrientationAffix, normalizeDate} from './utils';\n\nexport const handleInfoBlock = ({infoBlock, props, structure}) => {\n    const {sections} = structure;\n    const {id: infoBlockScheduleId, ...restInfoBlockScheduleData} = infoBlock;\n    const {blockName, infoBlockId, from, to} = restInfoBlockScheduleData;\n    const sectionKey = Object.keys(sections).find((key) => sections[key].id === blockName);\n\n    if (sectionKey) {\n        const section = sections[sectionKey];\n        const {carousel} = section;\n\n        if (carousel) {\n            const {$inner, infoBlocks} = carousel;\n            const structureInfoBlockKey = Object.keys(infoBlocks).find((key) => infoBlocks[key].infoBlockScheduleId === infoBlockScheduleId);\n            const momentNow = window.timeTouchTv ? new Date(window.timeTouchTv) : new Date();\n            const momentFrom = new Date(normalizeDate(from));\n            const momentTo = new Date(normalizeDate(to));\n\n            if (momentNow > momentFrom && momentNow < momentTo) {\n                if (!structureInfoBlockKey) {\n                    const {amount, orientation} = section;\n                    const $infoBlock = document.createElement('div');\n                    const $infoBlockWrapper = document.createElement('div');\n                    const dynamicOrientationAffix = getOrientationAffix(orientation);\n                    const dynamicClass = `col col-${dynamicOrientationAffix}-xs-${Math.round(24 / amount)}`;\n                    const infoBlockData = structure.infoBlockList.find((infoBlockDataItem) => infoBlockDataItem.id === infoBlockId);\n                    let {id, ...extInfoBlockData} = infoBlockData;\n\n                    extInfoBlockData = {blockName, infoBlockId, infoBlockScheduleId, ...extInfoBlockData};\n                    $infoBlockWrapper.className = props.iBWrapperClass + ' ' + props.carouselSlideClass + ' ' + dynamicClass;\n                    $infoBlock.className = props.iBClass;\n                    $infoBlockWrapper.appendChild($infoBlock);\n                    $inner.appendChild($infoBlockWrapper);\n\n                    const newInfoBlock = {\n                        $: $infoBlock,\n                        ...extInfoBlockData,\n                    };\n\n                    carousel.infoBlocks[infoBlockScheduleId] = newInfoBlock;\n                    drawInfoBlockContents({infoBlock: newInfoBlock, props});\n                    checkCarousel({props, section});\n                    metricsClickInfoBlock({infoBlock: newInfoBlock, props});\n                }\n            } else {\n                if (structureInfoBlockKey) {\n                    removeInfoBlock({infoBlock: infoBlocks[structureInfoBlockKey], props, section});\n                }\n            }\n        }\n    }\n};\n\nconst removeInfoBlock = ({infoBlock, props, section}) => {\n    const {\n        carousel,\n        carousel: {$inner, infoBlocks},\n    } = section;\n    const {$: $infoBlock, infoBlockScheduleId: currInfoBlockScheduleId} = infoBlock;\n    const $infoBlockNode = findElLastParentNode($infoBlock, $inner);\n\n    if ($infoBlockNode) {\n        $inner.removeChild($infoBlockNode);\n        carousel.infoBlocks = Object.keys(infoBlocks).reduce(\n            (acc, infoBlockScheduleKey) =>\n                infoBlocks[infoBlockScheduleKey].infoBlockScheduleId !== currInfoBlockScheduleId\n                    ? {\n                          ...acc,\n                          [infoBlockScheduleKey]: infoBlocks[infoBlockScheduleKey],\n                      }\n                    : acc,\n            {}\n        );\n        checkCarousel({props, section});\n    }\n};\n\nconst drawInfoBlockContents = ({infoBlock, props}) => {\n    if (infoBlock) {\n        const {$: $infoBlock, image, shortDescription, title} = infoBlock;\n        const withTitle = !!title;\n        const withDescription = !!shortDescription;\n\n        if (image) {\n            $infoBlock.style.backgroundImage = `url(${image})`;\n        } else {\n            $infoBlock.style.backgroundColor = props.iBBgColor;\n        }\n\n        if (withTitle || withDescription) {\n            const $backdrop = document.createElement('div');\n            let dynamicBackdropClass = props.iBBackdropClass;\n\n            if (withDescription) {\n                dynamicBackdropClass = `${dynamicBackdropClass} ${props.iBBackdropClassFull}`;\n            }\n\n            $backdrop.className = dynamicBackdropClass;\n            $infoBlock.appendChild($backdrop);\n        }\n\n        if (withTitle) {\n            const $title = document.createElement('div');\n            const $titleInner = document.createElement('div');\n            let dynamicTitleClass = props.iBTitleClass;\n\n            if (!withDescription) {\n                dynamicTitleClass = `${dynamicTitleClass} ${props.iBTitleClassAlign}`;\n                $titleInner.className = props.iBTitleInnerClass;\n            }\n\n            $title.className = dynamicTitleClass;\n            $titleInner.textContent = title;\n            $title.appendChild($titleInner);\n            $infoBlock.appendChild($title);\n        }\n\n        if (withDescription) {\n            const $shortDescription = document.createElement('div');\n\n            $shortDescription.className = props.iBShortDescriptionClass;\n            $shortDescription.textContent = shortDescription;\n            $infoBlock.appendChild($shortDescription);\n        }\n    }\n};\n","import {handleClick} from './handlers';\n\nexport const drawLayout = ({callback, data, props, structure}) => {\n    const {layout} = data;\n\n    if (layout) {\n        const {src} = layout;\n        const $container = document.querySelector(props.containerSelector);\n\n        if ($container && src) {\n            structure.container = {\n                $: $container,\n            };\n            $container.innerHTML = src;\n\n            const $layout = document.querySelector(props.layoutSelector);\n\n            structure.layout = {\n                $: $layout,\n                ...layout,\n            };\n            document.addEventListener('click', (e) => handleClick({e, props, structure}), true);\n\n            if (callback) {\n                callback();\n            }\n        }\n    }\n};\n","import {changeSlide} from './carousel';\nimport {metricsClickInfoBlock} from './metrics';\nimport {clearModalContents, drawModalContents} from './modal';\nimport {findClosest} from './utils';\n\nexport const handleClick = ({e, props, structure}) => {\n    const $target = e.target;\n    const {\n        modal: {$: $modal},\n    } = structure;\n\n    if ($modal) {\n        let {\n            modal: {$close, isOpened},\n            sections,\n        } = structure;\n        const $infoBlock = findClosest($target, props.iBSelector);\n        const isTargetInModal = !!findClosest($target, props.iBModalSelector);\n        let target = {};\n\n        Object.keys(sections).forEach((sectionKey) => {\n            const section = sections[sectionKey];\n            const {carousel} = section;\n\n            if (carousel.$backward === $target) {\n                target = {\n                    infoBlock: undefined,\n                    section,\n                    type: 'backward',\n                };\n            }\n\n            if (carousel.$forward === $target) {\n                target = {\n                    infoBlock: undefined,\n                    section,\n                    type: 'forward',\n                };\n            }\n\n            if ($infoBlock) {\n                const {infoBlocks} = carousel;\n                const infoBlockKey = Object.keys(infoBlocks).find((key) => infoBlocks[key].$ === $infoBlock);\n\n                if (infoBlockKey) {\n                    const infoBlockData = infoBlocks[infoBlockKey];\n\n                    target = {\n                        infoBlock: infoBlockData,\n                        section,\n                        type: 'slide',\n                    };\n                }\n            }\n        });\n\n        switch (true) {\n            case !!(isOpened && ($target === $close || !isTargetInModal)):\n                structure.modal.isOpened = false;\n                $modal.setAttribute(props.iBModalAttrHidden, props.iBModalAttrHiddenTrue);\n                clearModalContents({structure});\n\n                break;\n            case !!(!isOpened && target.infoBlock): {\n                const {infoBlock} = target;\n\n                drawModalContents({infoBlock, props, structure});\n                structure.modal.isOpened = true;\n                $modal.setAttribute(props.iBModalAttrHidden, props.iBModalAttrHiddenFalse);\n                metricsClickInfoBlock({infoBlock, props});\n\n                break;\n            }\n            case 'backward' === target.type: {\n                const {section} = target;\n\n                changeSlide({diff: -1, section});\n\n                break;\n            }\n            case 'forward' === target.type: {\n                const {section} = target;\n\n                changeSlide({diff: 1, section});\n\n                break;\n            }\n            default:\n                break;\n        }\n    }\n};\n"],"sourceRoot":""}